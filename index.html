<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recordatorio de Medicamentos</title>

<style>
:root{
  --azul:#2f80ed;
  --fondo:#f2f4f7;
  --blanco:#ffffff;
  --texto:#333;
  --radio:14px;
}

*{box-sizing:border-box;font-family:Arial, Helvetica, sans-serif;}

body{
  margin:0;
  background:var(--fondo);
  color:var(--texto);
}

header{
  background:var(--blanco);
  padding:20px;
  text-align:center;
  box-shadow:0 2px 6px rgba(0,0,0,.05);
}

header h1{margin:0;font-size:24px;}
header p{margin:5px 0 0;color:#777;}

.container{
  max-width:420px;
  margin:20px auto;
  padding:10px;
}

.card{
  background:var(--blanco);
  border-radius:var(--radio);
  padding:20px;
  margin-bottom:20px;
}

.btn{
  width:100%;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:var(--radio);
  background:var(--azul);
  color:white;
  font-size:16px;
  cursor:pointer;
}

.btn.secondary{
  background:#555;
}

input,select{
  width:100%;
  padding:12px;
  margin-top:6px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}

label{font-weight:bold;font-size:14px;}

.hidden{display:none;}

.image-box img{
  width:100%;
  border-radius:var(--radio);
}

footer{
  text-align:center;
  padding:20px;
  color:#777;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <h1>ðŸ’Š Recordatorio de Medicamentos</h1>
  <p>MenÃº principal</p>
</header>

<div class="container">

  <!-- BIENVENIDA -->
  <div class="card" id="bienvenida"></div>

  <!-- MENÃš -->
  <div class="card">
    <button class="btn" onclick="mostrar('datos')">ðŸ‘¤ Datos personales</button>
    <button class="btn" onclick="mostrar('medicamentos')">ðŸ’Š Medicamentos</button>
  </div>

  <!-- DATOS PERSONALES -->
  <div class="card hidden" id="datos">
    <h3>Datos personales</h3>

    <label>Nombre</label>
    <input id="nombre">

    <label>Fecha de nacimiento</label>
    <input type="date" id="fecha">

    <label>Nombre del cuidador</label>
    <input id="cuidador">

    <label>TelÃ©fono del cuidador</label>
    <input id="telefono">

    <label>
      <input type="checkbox" id="voz"> Aviso por voz
    </label><br><br>

    <label>
      <input type="checkbox" id="vibracion"> VibraciÃ³n
    </label>

    <button class="btn" onclick="guardarDatos()">Guardar</button>
    <button class="btn secondary" onclick="volver()">Volver</button>
  </div>

  <!-- MEDICAMENTOS -->
  <div class="card hidden" id="medicamentos">
    <h3>Medicamentos</h3>

    <label>Nombre del medicamento</label>
    <input id="med-nombre">

    <label>Dosis</label>
    <input id="med-dosis">

    <label>
      <input type="checkbox" id="med-permanente"> Tratamiento permanente
    </label>

    <button class="btn" onclick="guardarMedicamento()">Guardar medicamento</button>
    <button class="btn secondary" onclick="volver()">Volver</button>

    <div id="listaMed"></div>
  </div>

  <!-- IMAGEN -->
  <div class="card image-box">
    <img src="personas-inclusivas.png" alt="Personas de distintas edades y capacidades">
  </div>

</div>

<footer>
  Desarrollado por CA TecnologÃ­a
</footer>

<script>
function mostrar(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function volver(){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('hidden'));
  document.getElementById('datos').classList.add('hidden');
  document.getElementById('medicamentos').classList.add('hidden');
}

function calcularEdad(fecha){
  const f=new Date(fecha);
  const hoy=new Date();
  let aÃ±os=hoy.getFullYear()-f.getFullYear();
  let meses=hoy.getMonth()-f.getMonth();
  if(meses<0){aÃ±os--;meses+=12;}
  return `${aÃ±os} aÃ±os y ${meses} meses`;
}

function guardarDatos(){
  const data={
    nombre:nombre.value,
    fecha:fecha.value,
    cuidador:cuidador.value,
    telefono:telefono.value,
    voz:voz.checked,
    vibracion:vibracion.checked
  };
  localStorage.setItem('datos',JSON.stringify(data));
  cargar();
  volver();
}

function guardarMedicamento(){
  let meds=JSON.parse(localStorage.getItem('meds')||'[]');
  meds.push({
    nombre:medNombre.value,
    dosis:medDosis.value,
    permanente:medPermanente.checked
  });
  localStorage.setItem('meds',JSON.stringify(meds));
  cargar();
}

function cargar(){
  const d=JSON.parse(localStorage.getItem('datos'));
  if(d){
    bienvenida.innerHTML=`<h2>Bienvenido ${d.nombre}</h2><p>Edad: ${calcularEdad(d.fecha)}</p>`;
    nombre.value=d.nombre;
    fecha.value=d.fecha;
    cuidador.value=d.cuidador;
    telefono.value=d.telefono;
    voz.checked=d.voz;
    vibracion.checked=d.vibracion;
  }

  const lista=document.getElementById('listaMed');
  const meds=JSON.parse(localStorage.getItem('meds')||'[]');
  lista.innerHTML='<h4>Medicamentos guardados</h4>';
  meds.forEach(m=>{
    lista.innerHTML+=`<p>â€¢ ${m.nombre} (${m.dosis}) ${m.permanente?'[Permanente]':''}</p>`;
  });
}

const medNombre=document.getElementById('med-nombre');
const medDosis=document.getElementById('med-dosis');
const medPermanente=document.getElementById('med-permanente');

cargar();
</script>

</body>
</html>
