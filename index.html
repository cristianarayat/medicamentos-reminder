<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recordatorio de Medicamentos</title>

<style>
:root{
  --azul:#2f80ed;
  --gris:#f2f4f7;
  --blanco:#fff;
  --texto:#333;
}

*{box-sizing:border-box;font-family:Arial, Helvetica, sans-serif;}

body{
  margin:0;
  background:var(--gris);
  color:var(--texto);
}

header{
  text-align:center;
  padding:20px;
}

header h1{
  margin:10px 0 0;
  font-size:26px;
}

.card{
  background:var(--blanco);
  margin:15px;
  padding:20px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}

button{
  width:100%;
  padding:14px;
  margin:10px 0;
  border:none;
  border-radius:12px;
  background:var(--azul);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

button.secundario{
  background:#777;
}

input, select{
  width:100%;
  padding:12px;
  margin:6px 0 14px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}

/* Switch */
.switch-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:15px;
}

.switch-row span{
  display:flex;
  align-items:center;
  gap:8px;
}

.switch{
  position:relative;
  width:50px;
  height:26px;
}
.switch input{display:none;}
.slider{
  position:absolute;
  inset:0;
  background:#ccc;
  border-radius:26px;
  transition:.3s;
}
.slider:before{
  content:"";
  position:absolute;
  width:22px;
  height:22px;
  left:2px;
  top:2px;
  background:#fff;
  border-radius:50%;
  transition:.3s;
}
.switch input:checked + .slider{
  background:var(--azul);
}
.switch input:checked + .slider:before{
  transform:translateX(24px);
}

img.principal{
  width:100%;
  border-radius:14px;
  margin-top:15px;
}

footer{
  text-align:center;
  padding:20px;
  color:#777;
}

/* Medicamentos */
.med-item{
  border:1px solid #ddd;
  padding:12px;
  border-radius:12px;
  margin-bottom:10px;
}

.hidden{display:none;}

.toast{
  background:#2ecc71;
  color:#fff;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
  text-align:center;
}
</style>
</head>

<body>

<header>
  üíä
  <h1>Recordatorio de Medicamentos</h1>
</header>

<!-- HOME -->
<section id="home" class="card">
  <h2 id="bienvenida"></h2>

  <button onclick="mostrar('datos')">üë§ Datos personales</button>
  <button onclick="mostrar('medicamentos')">üíä Medicamentos</button>

  <img src="personas-inclusivas.png" class="principal" alt="Personas inclusivas">
</section>

<!-- DATOS PERSONALES -->
<section id="datos" class="card hidden">
  <h2>Datos personales</h2>

  <label>Nombre</label>
  <input id="nombre">

  <label>Fecha de nacimiento</label>
  <input type="date" id="fechaNacimiento">

  <label>Nombre del cuidador</label>
  <input id="cuidadorNombre">

  <label>Tel√©fono del cuidador</label>
  <input id="cuidadorTelefono">

  <div class="switch-row">
    <span>üîä Aviso por voz</span>
    <label class="switch">
      <input type="checkbox" id="voz">
      <span class="slider"></span>
    </label>
  </div>

  <div class="switch-row">
    <span>üì≥ Vibraci√≥n</span>
    <label class="switch">
      <input type="checkbox" id="vibracion">
      <span class="slider"></span>
    </label>
  </div>

  <button onclick="guardarDatos()">Guardar</button>
  <div id="msgDatos"></div>

  <button class="secundario" onclick="mostrar('home')">‚Üê Volver</button>
</section>

<!-- MEDICAMENTOS -->
<section id="medicamentos" class="card hidden">
  <h2>Medicamentos</h2>

  <label>Nombre del medicamento</label>
  <input id="medNombre">

  <label>Dosis por d√≠a</label>
  <input type="number" min="1" id="medDosis">

  <label>Horarios (uno por l√≠nea)</label>
  <textarea id="medHorarios" style="width:100%;height:80px"></textarea>

  <label>D√≠as</label>
  <select id="medDias" multiple>
    <option>Lunes</option><option>Martes</option><option>Mi√©rcoles</option>
    <option>Jueves</option><option>Viernes</option>
    <option>S√°bado</option><option>Domingo</option>
  </select>

  <label>Lugar donde se guarda</label>
  <input id="medLugar">

  <label>Foto (opcional)</label>
  <input type="file" id="medFoto">

  <div class="switch-row">
    <span>Permanente</span>
    <label class="switch">
      <input type="checkbox" id="medPermanente">
      <span class="slider"></span>
    </label>
  </div>

  <button onclick="guardarMedicamento()">Guardar medicamento</button>

  <h3>Registrados</h3>
  <div id="listaMedicamentos"></div>

  <button class="secundario" onclick="mostrar('home')">‚Üê Volver</button>
</section>

<footer>
  Desarrollado por CA Tecnolog√≠a
</footer>

<script>
const secciones=["home","datos","medicamentos"];
function mostrar(id){
  secciones.forEach(s=>document.getElementById(s).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* DATOS */
function guardarDatos(){
  const tel=document.getElementById("cuidadorTelefono").value;
  if(tel.length<8){
    alert("Tel√©fono inv√°lido");
    return;
  }

  const datos={
    nombre:nombre.value,
    fecha:fechaNacimiento.value,
    cuidador:cuidadorNombre.value,
    telefono:tel,
    voz:voz.checked,
    vibracion:vibracion.checked
  };
  localStorage.setItem("datos",JSON.stringify(datos));
  msgDatos.innerHTML='<div class="toast">Datos guardados correctamente</div>';
  cargar();
}

/* MEDICAMENTOS */
let meds=JSON.parse(localStorage.getItem("meds"))||[];

function guardarMedicamento(){
  meds.push({
    nombre:medNombre.value,
    dosis:medDosis.value,
    horarios:medHorarios.value.split("\n"),
    dias:[...medDias.selectedOptions].map(o=>o.value),
    lugar:medLugar.value,
    permanente:medPermanente.checked
  });
  localStorage.setItem("meds",JSON.stringify(meds));
  listar();
}

function listar(){
  listaMedicamentos.innerHTML="";
  meds.forEach(m=>{
    const d=document.createElement("div");
    d.className="med-item";
    d.innerHTML=`<strong>${m.nombre}</strong><br>
    Dosis: ${m.dosis}<br>
    Horarios: ${m.horarios.join(", ")}<br>
    D√≠as: ${m.dias.join(", ")}<br>
    Lugar: ${m.lugar}<br>
    Tipo: ${m.permanente?"Permanente":"Temporal"}`;
    listaMedicamentos.appendChild(d);
  });
}

/* INICIO */
function cargar(){
  const d=JSON.parse(localStorage.getItem("datos"));
  if(d){
    const fn=new Date(d.fecha);
    const hoy=new Date();
    let a√±os=hoy.getFullYear()-fn.getFullYear();
    let meses=hoy.getMonth()-fn.getMonth();
    if(meses<0){a√±os--;meses+=12;}
    bienvenida.innerText=`Bienvenido ${d.nombre} ‚Äì ${a√±os} a√±os y ${meses} meses`;
  }
  listar();
}
cargar();
</script>

</body>
</html>
